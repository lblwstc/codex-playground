:root {
  --bg: #080d1c;
  --panel: #101a33cc;
  --panel-border: #293f6a;
  --text: #eef5ff;
  --muted: #adc4e6;
  --accent: #56beff;
}
* { box-sizing: border-box; }
html, body { margin: 0; height: 100%; background: var(--bg); color: var(--text); font-family: Inter, system-ui, -apple-system, sans-serif; }
#app { height: 100%; display: flex; flex-direction: column; }
.topbar {
  display: flex; align-items: center; gap: 12px; padding: 10px 14px;
  background: #0c1730; border-bottom: 1px solid #1f345d;
}
.brand { font-weight: 700; white-space: nowrap; }
.resource-bar { display: flex; gap: 8px; flex-wrap: wrap; }
.resource-pill {
  display: flex; align-items: center; gap: 6px; padding: 5px 8px; border-radius: 999px;
  border: 1px solid #2c4c7a; background: #122241; font-size: 12px;
}
.rate { color: var(--muted); }
.dot { width: 9px; height: 9px; border-radius: 50%; display: inline-block; }

.layout { flex: 1; display: grid; grid-template-columns: 270px 1fr 290px; min-height: 0; }
.viewport-wrap { position: relative; min-height: 0; }
#gameCanvas { width: 100%; height: 100%; display: block; touch-action: none; }

.panel {
  background: var(--panel);
  border: 1px solid var(--panel-border);
  margin: 8px;
  border-radius: 14px;
  overflow: auto;
  padding: 10px;
}
.tech-desktop { margin: 0 8px 8px; max-height: 170px; }
.panel-section { border: 1px solid #2a4167; border-radius: 12px; padding: 10px; margin-bottom: 10px; background: #10213f; }
.panel-section h3 { margin: 0 0 8px; font-size: 15px; }
.small-text { margin: 0 0 8px; font-size: 13px; color: var(--muted); }
.action-btn {
  width: 100%; min-height: 44px; border-radius: 10px; border: 1px solid #4a6fa8;
  background: linear-gradient(#16325f, #12284c); color: var(--text); margin-bottom: 8px;
}
.action-btn:active { transform: translateY(1px); }
.route-select { width: 100%; min-height: 44px; border-radius: 10px; }
.tech-card { border: 1px solid #33517f; border-radius: 10px; padding: 8px; margin-bottom: 8px; }
.tech-card.locked { opacity: 0.75; }
.tech-card.unlocked { border-color: #6ccf8f; }
.tech-title { font-weight: 700; margin-bottom: 4px; }
.tech-desc, .tech-meta { font-size: 12px; color: var(--muted); margin-bottom: 6px; }

.mobile-nav {
  display: none;
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  padding: 8px max(12px, env(safe-area-inset-left)) calc(8px + env(safe-area-inset-bottom)) max(12px, env(safe-area-inset-right));
  background: #0b1733dd;
  backdrop-filter: blur(8px);
  gap: 8px;
}
.mobile-tab {
  flex: 1; min-height: 44px; border-radius: 12px; border: 1px solid #385f97; background: #12244a; color: white;
}
.mobile-tab.active { background: #1b3f77; }
.reset-btn {
  position: fixed;
  top: calc(12px + env(safe-area-inset-top));
  right: max(10px, env(safe-area-inset-right));
  border-radius: 999px;
  min-height: 38px;
  background: #3a2033;
  color: #ffd0dd;
  border: 1px solid #ad5d84;
  padding: 0 14px;
}

@media (max-width: 900px) {
  .layout { grid-template-columns: 1fr; }
  .desktop-panel, .tech-desktop {
    position: fixed;
    left: max(8px, env(safe-area-inset-left));
    right: max(8px, env(safe-area-inset-right));
    bottom: calc(62px + env(safe-area-inset-bottom));
    max-height: 40vh;
    display: none;
    z-index: 30;
    margin: 0;
  }
  .mobile-sheet.active { display: block; }
  .mobile-nav { display: flex; }
  .topbar { padding-top: calc(8px + env(safe-area-inset-top)); }
}
